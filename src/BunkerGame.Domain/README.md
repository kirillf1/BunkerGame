# BunkerGame.Domain
В данном проекте содержатся компоненты игры "Бункер", разделенные по контекстам. Каждый совокупный корень может хранить в себе события, если его состояние было изменено. Событийная модель реализована через MediatR.
Рассмотрим корни более подробно.
# GameSession
Ключевой класс для работы игры. Из домена GameSessions. Он как начинает игру, так и ее заканчивает. Может быть трех состояний, а именно:
1. Preparation в данном состоянии можно добавлять персонажей, менять сложность игры, устанавливать максимальное количество персонажей, название игры, бункер, катаклизм.
2. Started в этом состоянии происходят игровые процессы, например, исключение персонажей и т.д. Из этого состояния можно лишь перейти в Ended.
3. Ended. В этом состоянии уже невозможно выполнять игровые действия. Необходим лишь для хранения. Либо использовать метод Restart для сброса GameSession до состояния Preparation
## Также стоит обратить внимание на такие классы:
1. CharacterGame - содержит состояние персонажа (исключен он или нет) и его номер.
2. Catastrophe - содержит описание описание катаклизма и его влияние на игру.
3. Bunker - описывает, что находится внутри бункера.
4. ExternalSurrounding - информация, которая описывает, что находится за бункером. По логике игры может вообще отсутсвовать.
5. FreeSeatsSize - описывает количество мест, которые доступны в бункере. Меняется лишь через карты, либо через изменение бункера (зависит от размера бункера, чем больше бункер, тем больше мест)

Для взаимодействия с GameSession необходимо использовать эти [команды](/src/BunkerGame.Domain/GameSessions/Commands.cs), а для отслеживания изменения его состояния рекомендуется подписаться на эти [события](/src/BunkerGame.Domain/GameSessions/Events.cs).
# Character
Описывает [характеристики персонажа](/src/BunkerGame.Domain/Characters/CharacterComponents), которые указаны в [правилах](/GAME_RULES.md). Содержится в домене Characters. Имеет такие [команды](/src/BunkerGame.Domain/Characters/Commands.cs) и [события](/src/BunkerGame.Domain/Characters/Events.cs) для взаимодействия.
+ Profession - профессия персонажа, в ней указан стаж (от 0 до 20 лет).
+ Age - возраст, который не может быть меньше 16.
+ Childbearing - деторождение (childfree и не childfree).
+ Size - содержится рост и масса персонажа (телосложение).
+ AdditionalInformation - дополнительная информация.
+ Hobby - хобби, имеется опыт хобби (от 0 до 10 лет).
+ Phobia - фобия, если [DebuffType](/src/BunkerGame.GameTypes/CharacterTypes/PhobiaDebuffType.cs).None, то у игрока нет фобии.
+ Health - здоровье. Может быть заразной болезнью или полностью здоровым, либо смертельно болен.
+ Trait - черта характера. Например, добрый, злой и т.д.
+ Sex - пол (мужчина или женщина).
+ Item - багаж персонажа. Может быть несколько.
+ Cards - карты, они являются одноразовыми.
## Карты
В классе Character содержатся карты в количестве 2-3 штук. Карты необходимы для придания динамичности игре.

Карты могут взаимодествовать с доменном GameSessions и Characters, через их команды. Использование происходит в классе Character через метод UseCard.
В этом методе происходит [поиск](/src/BunkerGame.Domain/Characters/Cards/CardCommandExplorer) и создание подходящей команды. Карты могут быть направлены как на другого игрока (но необходимо указывать CharacterId иначе команда не будет выполнена) так и себя.

Стоит обратить внимание на [CardMethod](/src/BunkerGame.Domain/Characters/Cards/CardMethod.cs), который содержится в классе Card. Он в себе содержит 2 больших Enum [MethodDirection](/src/BunkerGame.GameTypes/CharacterTypes/MethodDirection.cs) 
и [MethodType](/src/BunkerGame.GameTypes/CharacterTypes/MethodType.cs). На основании их происходит поиск команд. 

Рассмотрим некоторые их комбинации
+ MethodType.Change и MethodDirection.Health создаст команду UpdateHealth из домена Characters, но при этом необходимо предварительно взять Id персонажа, на которого будет применена карта
+ MethodType.Update и MethodDirection.Profession создаст команду UpdateProfession из домена Characters, но применена будут на того кто использовал карту стоит уловить разницу между Change и Update
+ MethodType.Add и MethodDirection.FreePlace создаст команду AddSeats из домена GameSessions, которая добавит добавит одно место в бункер
### Итог по картам
Является слабым местом системы с плохим неймингом Enum и с неочевидным способом их использования. Планирую переработать данную систему карт, но пока что нет идей на этот счет. Буду благодарен за помощь в решении данной проблемы.

# Player
Класс из домена Players содержит информацию о персонаже (имя, количество игр и т.д).
# GameResult
Класс из домена GameResults содержит Id как GameSession и содержит количество выигранных и проигранных игр. Необходим для ведения статистики.

